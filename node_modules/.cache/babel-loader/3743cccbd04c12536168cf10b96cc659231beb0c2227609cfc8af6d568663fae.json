{"ast":null,"code":"import { snapshot, proxy, proxyWithComputed, subscribe, ref } from '@zag-js/store';\nexport { proxy, ref, snapshot, subscribe } from '@zag-js/store';\nimport { compact, isPlainObject, uuid, cast, callAll, isString, isFunction, noop, isObject, runIfFn, invariant, clear, isArray, hasProp, warn, isDev, isNumber } from '@zag-js/utils';\nimport { klona } from 'klona/full';\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nfunction deepMerge(source) {\n  for (var _len = arguments.length, objects = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    objects[_key - 1] = arguments[_key];\n  }\n  for (const obj of objects) {\n    const target = compact(obj);\n    for (const key in target) {\n      if (isPlainObject(obj[key])) {\n        if (!source[key]) {\n          source[key] = {};\n        }\n        deepMerge(source[key], obj[key]);\n      } else {\n        source[key] = obj[key];\n      }\n    }\n  }\n  return source;\n}\nfunction structuredClone(v) {\n  return klona(v);\n}\nfunction toEvent(event) {\n  const obj = isString(event) ? {\n    type: event\n  } : event;\n  return obj;\n}\nfunction toArray(value) {\n  if (!value) return [];\n  return isArray(value) ? value.slice() : [value];\n}\nfunction isGuardHelper(value) {\n  return isObject(value) && value.predicate != null;\n}\n\n// src/guard-utils.ts\nvar Truthy = () => true;\nfunction exec(guardMap, ctx, event, meta) {\n  return guard => {\n    if (isString(guard)) {\n      return !!guardMap[guard]?.(ctx, event, meta);\n    }\n    if (isFunction(guard)) {\n      return guard(ctx, event, meta);\n    }\n    return guard.predicate(guardMap)(ctx, event, meta);\n  };\n}\nfunction or() {\n  for (var _len2 = arguments.length, conditions = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    conditions[_key2] = arguments[_key2];\n  }\n  return {\n    predicate: guardMap => (ctx, event, meta) => conditions.map(exec(guardMap, ctx, event, meta)).some(Boolean)\n  };\n}\nfunction and() {\n  for (var _len3 = arguments.length, conditions = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    conditions[_key3] = arguments[_key3];\n  }\n  return {\n    predicate: guardMap => (ctx, event, meta) => conditions.map(exec(guardMap, ctx, event, meta)).every(Boolean)\n  };\n}\nfunction not(condition) {\n  return {\n    predicate: guardMap => (ctx, event, meta) => {\n      return !exec(guardMap, ctx, event, meta)(condition);\n    }\n  };\n}\nfunction stateIn() {\n  for (var _len4 = arguments.length, values = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    values[_key4] = arguments[_key4];\n  }\n  return (_ctx, _evt, meta) => meta.state.matches(...values);\n}\nvar guards = {\n  or,\n  and,\n  not,\n  stateIn\n};\nfunction choose(actions) {\n  return {\n    predicate: guardMap => (ctx, event, meta) => actions.find(def => {\n      const guard = def.guard ?? Truthy;\n      return exec(guardMap, ctx, event, meta)(guard);\n    })?.actions\n  };\n}\nfunction determineGuardFn(guard, guardMap) {\n  guard = guard ?? Truthy;\n  return (context, event, meta) => {\n    if (isString(guard)) {\n      const value = guardMap[guard];\n      return isFunction(value) ? value(context, event, meta) : value;\n    }\n    if (isGuardHelper(guard)) {\n      return guard.predicate(guardMap)(context, event, meta);\n    }\n    return guard?.(context, event, meta);\n  };\n}\nfunction determineActionsFn(values, guardMap) {\n  return (context, event, meta) => {\n    if (isGuardHelper(values)) {\n      return values.predicate(guardMap)(context, event, meta);\n    }\n    return values;\n  };\n}\nfunction createProxy(config) {\n  const computedContext = config.computed ?? cast({});\n  const initialContext = config.context ?? cast({});\n  const initialTags = config.initial ? config.states?.[config.initial]?.tags : [];\n  const state = proxy({\n    value: config.initial ?? \"\",\n    previousValue: \"\",\n    event: cast({}),\n    previousEvent: cast({}),\n    context: proxyWithComputed(initialContext, computedContext),\n    done: false,\n    tags: initialTags ?? [],\n    hasTag(tag) {\n      return this.tags.includes(tag);\n    },\n    matches() {\n      for (var _len5 = arguments.length, value = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        value[_key5] = arguments[_key5];\n      }\n      return value.includes(this.value);\n    },\n    can(event) {\n      return cast(this).nextEvents.includes(event);\n    },\n    get nextEvents() {\n      const stateEvents = config.states?.[this.value]?.[\"on\"] ?? {};\n      const globalEvents = config?.on ?? {};\n      return Object.keys({\n        ...stateEvents,\n        ...globalEvents\n      });\n    },\n    get changed() {\n      if (this.event.value === \"machine.init\" /* Init */ || !this.previousValue) return false;\n      return this.value !== this.previousValue;\n    }\n  });\n  return cast(state);\n}\nfunction determineDelayFn(delay, delaysMap) {\n  return (context, event) => {\n    if (isNumber(delay)) return delay;\n    if (isFunction(delay)) {\n      return delay(context, event);\n    }\n    if (isString(delay)) {\n      const value = Number.parseFloat(delay);\n      if (!Number.isNaN(value)) {\n        return value;\n      }\n      if (delaysMap) {\n        const valueOrFn = delaysMap?.[delay];\n        invariant(valueOrFn == null, `[@zag-js/core > determine-delay] Cannot determine delay for \\`${delay}\\`. It doesn't exist in \\`options.delays\\``);\n        return isFunction(valueOrFn) ? valueOrFn(context, event) : valueOrFn;\n      }\n    }\n  };\n}\nfunction toTarget(target) {\n  return isString(target) ? {\n    target\n  } : target;\n}\nfunction determineTransitionFn(transitions, guardMap) {\n  return (context, event, meta) => {\n    return toArray(transitions).map(toTarget).find(transition => {\n      const determineGuard = determineGuardFn(transition.guard, guardMap);\n      const guard = determineGuard(context, event, meta);\n      return guard ?? transition.target ?? transition.actions;\n    });\n  };\n}\n\n// src/machine.ts\nvar Machine = class {\n  // Let's get started!\n  constructor(config, options) {\n    var _this = this;\n    __publicField(this, \"status\", \"Not Started\" /* NotStarted */);\n    __publicField(this, \"state\");\n    __publicField(this, \"initialState\");\n    __publicField(this, \"initialContext\");\n    __publicField(this, \"id\");\n    __publicField(this, \"type\", \"machine\" /* Machine */);\n    // Cleanup function map (per state)\n    __publicField(this, \"activityEvents\", /* @__PURE__ */new Map());\n    __publicField(this, \"delayedEvents\", /* @__PURE__ */new Map());\n    // state update listeners the user can opt-in for\n    __publicField(this, \"stateListeners\", /* @__PURE__ */new Set());\n    __publicField(this, \"doneListeners\", /* @__PURE__ */new Set());\n    __publicField(this, \"contextWatchers\", /* @__PURE__ */new Set());\n    // Cleanup functions (for `subscribe`)\n    __publicField(this, \"removeStateListener\", noop);\n    // For Parent <==> Spawned Actor relationship\n    __publicField(this, \"parent\");\n    __publicField(this, \"children\", /* @__PURE__ */new Map());\n    // A map of guard, action, delay implementations\n    __publicField(this, \"guardMap\");\n    __publicField(this, \"actionMap\");\n    __publicField(this, \"delayMap\");\n    __publicField(this, \"activityMap\");\n    __publicField(this, \"sync\");\n    __publicField(this, \"options\");\n    __publicField(this, \"config\");\n    __publicField(this, \"_created\", () => {\n      const event = toEvent(\"machine.created\" /* Created */);\n      this.executeActions(this.config?.created, event);\n    });\n    // Starts the interpreted machine.\n    __publicField(this, \"start\", init => {\n      this.state.value = \"\";\n      this.state.tags = [];\n      if (this.status === \"Running\" /* Running */) {\n        return this;\n      }\n      this.status = \"Running\" /* Running */;\n      this.removeStateListener = subscribe(this.state, () => {\n        this.stateListeners.forEach(listener => {\n          listener(this.stateSnapshot);\n        });\n      }, this.sync);\n      this.setupContextWatchers();\n      this.executeActivities(toEvent(\"machine.start\" /* Start */), toArray(this.config.activities), \"machine.start\" /* Start */);\n      this.executeActions(this.config.entry, toEvent(\"machine.start\" /* Start */));\n      const event = toEvent(\"machine.init\" /* Init */);\n      const target = isObject(init) ? init.value : init;\n      const context = isObject(init) ? init.context : void 0;\n      if (context) {\n        this.setContext(context);\n      }\n      const transition = {\n        target: target ?? this.config.initial\n      };\n      const next = this.getNextStateInfo(transition, event);\n      this.initialState = next;\n      this.performStateChangeEffects(this.state.value, next, event);\n      return this;\n    });\n    __publicField(this, \"setupContextWatchers\", () => {\n      const {\n        watch\n      } = this.config;\n      if (!watch) return;\n      let prev = snapshot(this.state.context);\n      const cleanup = subscribe(this.state.context, () => {\n        const next = snapshot(this.state.context);\n        for (const [key, fn] of Object.entries(watch)) {\n          const isEqual = this.options.compareFns?.[key] ?? Object.is;\n          if (isEqual(prev[key], next[key])) continue;\n          this.executeActions(fn, this.state.event);\n        }\n        prev = next;\n      });\n      this.contextWatchers.add(cleanup);\n    });\n    // Stops the interpreted machine\n    __publicField(this, \"stop\", () => {\n      if (this.status === \"Stopped\" /* Stopped */) return;\n      this.performExitEffects(this.state.value, toEvent(\"machine.stop\" /* Stop */));\n      this.executeActions(this.config.exit, toEvent(\"machine.stop\" /* Stop */));\n      this.setState(\"\");\n      this.setEvent(\"machine.stop\" /* Stop */);\n      this.stopStateListeners();\n      this.stopChildren();\n      this.stopActivities();\n      this.stopDelayedEvents();\n      this.stopContextWatchers();\n      this.status = \"Stopped\" /* Stopped */;\n      return this;\n    });\n    __publicField(this, \"stopStateListeners\", () => {\n      this.removeStateListener();\n      this.stateListeners.clear();\n    });\n    __publicField(this, \"stopContextWatchers\", () => {\n      this.contextWatchers.forEach(fn => fn());\n      this.contextWatchers.clear();\n    });\n    __publicField(this, \"stopDelayedEvents\", () => {\n      this.delayedEvents.forEach(state => {\n        state.forEach(stop => stop());\n      });\n      this.delayedEvents.clear();\n    });\n    // Cleanup running activities (e.g `setInterval`, invoked callbacks, promises)\n    __publicField(this, \"stopActivities\", state => {\n      if (state) {\n        this.activityEvents.get(state)?.forEach(stop => stop());\n        this.activityEvents.get(state)?.clear();\n        this.activityEvents.delete(state);\n      } else {\n        this.activityEvents.forEach(state2 => {\n          state2.forEach(stop => stop());\n          state2.clear();\n        });\n        this.activityEvents.clear();\n      }\n    });\n    /**\n     * Function to send event to spawned child machine or actor\n     */\n    __publicField(this, \"sendChild\", (evt, to) => {\n      const event = toEvent(evt);\n      const id = runIfFn(to, this.contextSnapshot);\n      const child = this.children.get(id);\n      if (!child) {\n        invariant(`[@zag-js/core] Cannot send '${event.type}' event to unknown child`);\n      }\n      child.send(event);\n    });\n    /**\n     * Function to stop a running child machine or actor\n     */\n    __publicField(this, \"stopChild\", id => {\n      if (!this.children.has(id)) {\n        invariant(`[@zag-js/core > stop-child] Cannot stop unknown child ${id}`);\n      }\n      this.children.get(id).stop();\n      this.children.delete(id);\n    });\n    __publicField(this, \"removeChild\", id => {\n      this.children.delete(id);\n    });\n    // Stop and delete spawned actors\n    __publicField(this, \"stopChildren\", () => {\n      this.children.forEach(child => child.stop());\n      this.children.clear();\n    });\n    __publicField(this, \"setParent\", parent => {\n      this.parent = parent;\n    });\n    __publicField(this, \"spawn\", (src, id) => {\n      const actor = runIfFn(src);\n      if (id) actor.id = id;\n      actor.type = \"machine.actor\" /* Actor */;\n      actor.setParent(this);\n      this.children.set(actor.id, cast(actor));\n      actor.onDone(() => {\n        this.removeChild(actor.id);\n      }).start();\n      return cast(ref(actor));\n    });\n    __publicField(this, \"stopActivity\", key => {\n      if (!this.state.value) return;\n      const cleanups = this.activityEvents.get(this.state.value);\n      cleanups?.get(key)?.();\n      cleanups?.delete(key);\n    });\n    __publicField(this, \"addActivityCleanup\", (state, key, cleanup) => {\n      if (!state) return;\n      if (!this.activityEvents.has(state)) {\n        this.activityEvents.set(state, /* @__PURE__ */new Map([[key, cleanup]]));\n      } else {\n        this.activityEvents.get(state)?.set(key, cleanup);\n      }\n    });\n    __publicField(this, \"setState\", target => {\n      this.state.previousValue = this.state.value;\n      this.state.value = target;\n      const stateNode = this.getStateNode(target);\n      if (target == null) {\n        clear(this.state.tags);\n      } else {\n        this.state.tags = toArray(stateNode?.tags);\n      }\n    });\n    /**\n     * To used within side effects for React or Vue to update context\n     */\n    __publicField(this, \"setContext\", context => {\n      if (!context) return;\n      deepMerge(this.state.context, compact(context));\n    });\n    __publicField(this, \"setOptions\", options => {\n      const opts = compact(options);\n      this.actionMap = {\n        ...this.actionMap,\n        ...opts.actions\n      };\n      this.delayMap = {\n        ...this.delayMap,\n        ...opts.delays\n      };\n      this.activityMap = {\n        ...this.activityMap,\n        ...opts.activities\n      };\n      this.guardMap = {\n        ...this.guardMap,\n        ...opts.guards\n      };\n    });\n    __publicField(this, \"getStateNode\", state => {\n      if (!state) return;\n      return this.config.states?.[state];\n    });\n    __publicField(this, \"getNextStateInfo\", (transitions, event) => {\n      const transition = this.determineTransition(transitions, event);\n      const isTargetless = !transition?.target;\n      const target = transition?.target ?? this.state.value;\n      const changed = this.state.value !== target;\n      const stateNode = this.getStateNode(target);\n      const reenter = !isTargetless && !changed && !transition?.internal;\n      const info = {\n        reenter,\n        transition,\n        stateNode,\n        target,\n        changed\n      };\n      this.log(\"NextState:\", `[${event.type}]`, this.state.value, \"---->\", info.target);\n      return info;\n    });\n    __publicField(this, \"getAfterActions\", (transition, delay) => {\n      let id;\n      const current = this.state.value;\n      return {\n        entry: () => {\n          id = globalThis.setTimeout(() => {\n            const next = this.getNextStateInfo(transition, this.state.event);\n            this.performStateChangeEffects(current, next, this.state.event);\n          }, delay);\n        },\n        exit: () => {\n          globalThis.clearTimeout(id);\n        }\n      };\n    });\n    /**\n     * All `after` events leverage `setTimeout` and `clearTimeout`,\n     * we invoke the `clearTimeout` on exit and `setTimeout` on entry.\n     *\n     * To achieve this, we split the `after` defintion into `entry` and `exit`\n     *  functions and append them to the state's `entry` and `exit` actions\n     */\n    __publicField(this, \"getDelayedEventActions\", state => {\n      const stateNode = this.getStateNode(state);\n      const event = this.state.event;\n      if (!stateNode || !stateNode.after) return;\n      const entries = [];\n      const exits = [];\n      if (isArray(stateNode.after)) {\n        const transition = this.determineTransition(stateNode.after, event);\n        if (!transition) return;\n        if (!hasProp(transition, \"delay\")) {\n          throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(transition)}`);\n        }\n        const determineDelay = determineDelayFn(transition.delay, this.delayMap);\n        const __delay = determineDelay(this.contextSnapshot, event);\n        const actions = this.getAfterActions(transition, __delay);\n        entries.push(actions.entry);\n        exits.push(actions.exit);\n        return {\n          entries,\n          exits\n        };\n      }\n      if (isObject(stateNode.after)) {\n        for (const delay in stateNode.after) {\n          const transition = stateNode.after[delay];\n          const determineDelay = determineDelayFn(delay, this.delayMap);\n          const __delay = determineDelay(this.contextSnapshot, event);\n          const actions = this.getAfterActions(transition, __delay);\n          entries.push(actions.entry);\n          exits.push(actions.exit);\n        }\n      }\n      return {\n        entries,\n        exits\n      };\n    });\n    /**\n     * Function to executes defined actions. It can accept actions as string\n     * (referencing `options.actions`) or actual functions.\n     */\n    __publicField(this, \"executeActions\", (actions, event) => {\n      const pickedActions = determineActionsFn(actions, this.guardMap)(this.contextSnapshot, event, this.guardMeta);\n      for (const action of toArray(pickedActions)) {\n        const fn = isString(action) ? this.actionMap?.[action] : action;\n        warn(isString(action) && !fn, `[@zag-js/core > execute-actions] No implementation found for action: \\`${action}\\``);\n        fn?.(this.state.context, event, this.meta);\n      }\n    });\n    /**\n     * Function to execute running activities and registers\n     * their cleanup function internally (to be called later on when we exit the state)\n     */\n    __publicField(this, \"executeActivities\", (event, activities, state) => {\n      for (const activity of activities) {\n        const fn = isString(activity) ? this.activityMap?.[activity] : activity;\n        if (!fn) {\n          warn(`[@zag-js/core > execute-activity] No implementation found for activity: \\`${activity}\\``);\n          continue;\n        }\n        const cleanup = fn(this.state.context, event, this.meta);\n        if (cleanup) {\n          const key = isString(activity) ? activity : activity.name || uuid();\n          this.addActivityCleanup(state ?? this.state.value, key, cleanup);\n        }\n      }\n    });\n    /**\n     * Normalizes the `every` definition to transition. `every` can be:\n     * - An array of possible actions to run (we need to pick the first match based on guard)\n     * - An object of intervals and actions\n     */\n    __publicField(this, \"createEveryActivities\", (every, callbackfn) => {\n      if (!every) return;\n      if (isArray(every)) {\n        const picked = toArray(every).find(transition => {\n          const delayOrFn = transition.delay;\n          const determineDelay2 = determineDelayFn(delayOrFn, this.delayMap);\n          const delay2 = determineDelay2(this.contextSnapshot, this.state.event);\n          const determineGuard = determineGuardFn(transition.guard, this.guardMap);\n          const guard = determineGuard(this.contextSnapshot, this.state.event, this.guardMeta);\n          return guard ?? delay2 != null;\n        });\n        if (!picked) return;\n        const determineDelay = determineDelayFn(picked.delay, this.delayMap);\n        const delay = determineDelay(this.contextSnapshot, this.state.event);\n        const activity = () => {\n          const id = globalThis.setInterval(() => {\n            this.executeActions(picked.actions, this.state.event);\n          }, delay);\n          return () => {\n            globalThis.clearInterval(id);\n          };\n        };\n        callbackfn(activity);\n      } else {\n        for (const interval in every) {\n          const actions = every?.[interval];\n          const determineDelay = determineDelayFn(interval, this.delayMap);\n          const delay = determineDelay(this.contextSnapshot, this.state.event);\n          const activity = () => {\n            const id = globalThis.setInterval(() => {\n              this.executeActions(actions, this.state.event);\n            }, delay);\n            return () => {\n              globalThis.clearInterval(id);\n            };\n          };\n          callbackfn(activity);\n        }\n      }\n    });\n    __publicField(this, \"setEvent\", event => {\n      this.state.previousEvent = this.state.event;\n      this.state.event = ref(toEvent(event));\n    });\n    __publicField(this, \"performExitEffects\", (current, event) => {\n      const currentState = this.state.value;\n      if (currentState === \"\") return;\n      const stateNode = current ? this.getStateNode(current) : void 0;\n      this.stopActivities(currentState);\n      const _exit = determineActionsFn(stateNode?.exit, this.guardMap)(this.contextSnapshot, event, this.guardMeta);\n      const exitActions = toArray(_exit);\n      const afterExitActions = this.delayedEvents.get(currentState);\n      if (afterExitActions) {\n        exitActions.push(...afterExitActions);\n      }\n      this.executeActions(exitActions, event);\n      this.delayedEvents.delete(currentState);\n    });\n    __publicField(this, \"performEntryEffects\", (next, event) => {\n      const stateNode = this.getStateNode(next);\n      const activities = toArray(stateNode?.activities);\n      this.createEveryActivities(stateNode?.every, activity => {\n        activities.unshift(activity);\n      });\n      if (activities.length > 0) {\n        this.executeActivities(event, activities);\n      }\n      const pickedActions = determineActionsFn(stateNode?.entry, this.guardMap)(this.contextSnapshot, event, this.guardMeta);\n      const entryActions = toArray(pickedActions);\n      const afterActions = this.getDelayedEventActions(next);\n      if (stateNode?.after && afterActions) {\n        this.delayedEvents.set(next, afterActions?.exits);\n        entryActions.push(...afterActions.entries);\n      }\n      this.executeActions(entryActions, event);\n      if (stateNode?.type === \"final\") {\n        this.state.done = true;\n        this.doneListeners.forEach(listener => {\n          listener(this.stateSnapshot);\n        });\n        this.stop();\n      }\n    });\n    __publicField(this, \"performTransitionEffects\", (transitions, event) => {\n      const transition = this.determineTransition(transitions, event);\n      this.executeActions(transition?.actions, event);\n    });\n    /**\n     * Performs all the requires side-effects or reactions when\n     * we move from state A => state B.\n     *\n     * The Effect order:\n     * Exit actions (current state) => Transition actions  => Go to state => Entry actions (next state)\n     */\n    __publicField(this, \"performStateChangeEffects\", (current, next, event) => {\n      this.setEvent(event);\n      const changed = next.changed || next.reenter;\n      if (changed) {\n        this.performExitEffects(current, event);\n      }\n      this.performTransitionEffects(next.transition, event);\n      this.setState(next.target);\n      if (changed) {\n        this.performEntryEffects(next.target, event);\n      }\n    });\n    __publicField(this, \"determineTransition\", (transition, event) => {\n      const fn = determineTransitionFn(transition, this.guardMap);\n      return fn?.(this.contextSnapshot, event, this.guardMeta);\n    });\n    /**\n     * Function to send event to parent machine from spawned child\n     */\n    __publicField(this, \"sendParent\", evt => {\n      if (!this.parent) {\n        invariant(\"[@zag-js/core > send-parent] Cannot send event to an unknown parent\");\n      }\n      const event = toEvent(evt);\n      this.parent?.send(event);\n    });\n    __publicField(this, \"log\", function () {\n      if (isDev() && _this.options.debug) {\n        console.log(...arguments);\n      }\n    });\n    /**\n     * Function to send an event to current machine\n     */\n    __publicField(this, \"send\", evt => {\n      const event = toEvent(evt);\n      this.transition(this.state.value, event);\n    });\n    __publicField(this, \"transition\", (state, evt) => {\n      const stateNode = isString(state) ? this.getStateNode(state) : state?.stateNode;\n      const event = toEvent(evt);\n      if (!stateNode && !this.config.on) {\n        const msg = this.status === \"Stopped\" /* Stopped */ ? \"[@zag-js/core > transition] Cannot transition a stopped machine\" : `[@zag-js/core > transition] State does not have a definition for \\`state\\`: ${state}, \\`event\\`: ${event.type}`;\n        warn(msg);\n        return;\n      }\n      const transitions =\n      // @ts-expect-error - Fix this\n      stateNode?.on?.[event.type] ?? this.config.on?.[event.type];\n      const next = this.getNextStateInfo(transitions, event);\n      this.performStateChangeEffects(this.state.value, next, event);\n      return next.stateNode;\n    });\n    __publicField(this, \"subscribe\", listener => {\n      this.stateListeners.add(listener);\n      if (this.status === \"Running\" /* Running */) {\n        listener(this.stateSnapshot);\n      }\n      return () => {\n        this.stateListeners.delete(listener);\n      };\n    });\n    __publicField(this, \"onDone\", listener => {\n      this.doneListeners.add(listener);\n      return this;\n    });\n    __publicField(this, \"onTransition\", listener => {\n      this.stateListeners.add(listener);\n      if (this.status === \"Running\" /* Running */) {\n        listener(this.stateSnapshot);\n      }\n      return this;\n    });\n    this.config = structuredClone(config);\n    this.options = structuredClone(options ?? {});\n    this.id = this.config.id ?? `machine-${uuid()}`;\n    this.guardMap = this.options?.guards ?? {};\n    this.actionMap = this.options?.actions ?? {};\n    this.delayMap = this.options?.delays ?? {};\n    this.activityMap = this.options?.activities ?? {};\n    this.sync = this.options?.sync ?? false;\n    this.state = createProxy(this.config);\n    this.initialContext = snapshot(this.state.context);\n  }\n  // immutable state value\n  get stateSnapshot() {\n    return cast(snapshot(this.state));\n  }\n  getState() {\n    return this.stateSnapshot;\n  }\n  // immutable context value\n  get contextSnapshot() {\n    return this.stateSnapshot.context;\n  }\n  /**\n   * A reference to the instance methods of the machine.\n   * Useful when spawning child machines and managing the communication between them.\n   */\n  get self() {\n    const self = this;\n    return {\n      id: this.id,\n      send: this.send.bind(this),\n      sendParent: this.sendParent.bind(this),\n      sendChild: this.sendChild.bind(this),\n      stop: this.stop.bind(this),\n      stopChild: this.stopChild.bind(this),\n      spawn: this.spawn.bind(this),\n      stopActivity: this.stopActivity.bind(this),\n      get state() {\n        return self.stateSnapshot;\n      },\n      get initialContext() {\n        return self.initialContext;\n      },\n      get initialState() {\n        return self.initialState?.target ?? \"\";\n      }\n    };\n  }\n  get meta() {\n    return {\n      state: this.stateSnapshot,\n      guards: this.guardMap,\n      send: this.send.bind(this),\n      self: this.self,\n      initialContext: this.initialContext,\n      initialState: this.initialState?.target ?? \"\",\n      getState: () => this.stateSnapshot,\n      getAction: key => this.actionMap[key],\n      getGuard: key => this.guardMap[key]\n    };\n  }\n  get guardMeta() {\n    return {\n      state: this.stateSnapshot\n    };\n  }\n  get [Symbol.toStringTag]() {\n    return \"Machine\";\n  }\n  getHydrationState() {\n    const state = this.getState();\n    return {\n      value: state.value,\n      tags: state.tags\n    };\n  }\n};\nvar createMachine = (config, options) => new Machine(config, options);\nvar isMachine = value => {\n  return value instanceof Machine || value?.type === \"machine\" /* Machine */;\n};\nvar clsx = function () {\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n  return args.map(str => str?.trim?.()).filter(Boolean).join(\" \");\n};\nvar CSS_REGEX = /((?:--)?(?:\\w+-?)+)\\s*:\\s*([^;]*)/g;\nvar serialize = style => {\n  const res = {};\n  let match;\n  while (match = CSS_REGEX.exec(style)) {\n    res[match[1]] = match[2];\n  }\n  return res;\n};\nvar css = (a, b) => {\n  if (isString(a)) {\n    if (isString(b)) return `${a};${b}`;\n    a = serialize(a);\n  } else if (isString(b)) {\n    b = serialize(b);\n  }\n  return Object.assign({}, a ?? {}, b ?? {});\n};\nfunction mergeProps() {\n  let result = {};\n  for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n    args[_key7] = arguments[_key7];\n  }\n  for (let props of args) {\n    for (let key in result) {\n      if (key.startsWith(\"on\") && typeof result[key] === \"function\" && typeof props[key] === \"function\") {\n        result[key] = callAll(props[key], result[key]);\n        continue;\n      }\n      if (key === \"className\" || key === \"class\") {\n        result[key] = clsx(result[key], props[key]);\n        continue;\n      }\n      if (key === \"style\") {\n        result[key] = css(result[key], props[key]);\n        continue;\n      }\n      result[key] = props[key] !== void 0 ? props[key] : result[key];\n    }\n    for (let key in props) {\n      if (result[key] === void 0) {\n        result[key] = props[key];\n      }\n    }\n  }\n  return result;\n}\nexport { Machine, choose, createMachine, deepMerge, guards, isMachine, mergeProps };","map":{"version":3,"names":["snapshot","proxy","proxyWithComputed","subscribe","ref","compact","isPlainObject","uuid","cast","callAll","isString","isFunction","noop","isObject","runIfFn","invariant","clear","isArray","hasProp","warn","isDev","isNumber","klona","__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","deepMerge","source","_len","arguments","length","objects","Array","_key","target","structuredClone","v","toEvent","event","type","toArray","slice","isGuardHelper","predicate","Truthy","exec","guardMap","ctx","meta","guard","or","_len2","conditions","_key2","map","some","Boolean","and","_len3","_key3","every","not","condition","stateIn","_len4","values","_key4","_ctx","_evt","state","matches","guards","choose","actions","find","def","determineGuardFn","context","determineActionsFn","createProxy","config","computedContext","computed","initialContext","initialTags","initial","states","tags","previousValue","previousEvent","done","hasTag","tag","includes","_len5","_key5","can","nextEvents","stateEvents","globalEvents","on","keys","changed","determineDelayFn","delay","delaysMap","Number","parseFloat","isNaN","valueOrFn","toTarget","determineTransitionFn","transitions","transition","determineGuard","Machine","constructor","options","_this","Map","Set","executeActions","created","init","status","removeStateListener","stateListeners","forEach","listener","stateSnapshot","sync","setupContextWatchers","executeActivities","activities","entry","setContext","next","getNextStateInfo","initialState","performStateChangeEffects","watch","prev","cleanup","fn","entries","isEqual","compareFns","is","contextWatchers","add","performExitEffects","exit","setState","setEvent","stopStateListeners","stopChildren","stopActivities","stopDelayedEvents","stopContextWatchers","delayedEvents","stop","activityEvents","get","delete","state2","evt","to","id","contextSnapshot","child","children","send","has","parent","src","actor","setParent","set","onDone","removeChild","start","cleanups","stateNode","getStateNode","opts","actionMap","delayMap","delays","activityMap","determineTransition","isTargetless","reenter","internal","info","log","current","globalThis","setTimeout","clearTimeout","after","exits","Error","JSON","stringify","determineDelay","__delay","getAfterActions","push","pickedActions","guardMeta","action","activity","name","addActivityCleanup","callbackfn","picked","delayOrFn","determineDelay2","delay2","setInterval","clearInterval","interval","currentState","_exit","exitActions","afterExitActions","createEveryActivities","unshift","entryActions","afterActions","getDelayedEventActions","doneListeners","performTransitionEffects","performEntryEffects","debug","console","msg","getState","self","bind","sendParent","sendChild","stopChild","spawn","stopActivity","getAction","getGuard","Symbol","toStringTag","getHydrationState","createMachine","isMachine","clsx","_len6","args","_key6","str","trim","filter","join","CSS_REGEX","serialize","style","res","match","css","a","b","assign","mergeProps","result","_len7","_key7","props","startsWith"],"sources":["/Users/rishil/AIM-MedVisor/node_modules/@zag-js/core/dist/index.mjs"],"sourcesContent":["import { snapshot, proxy, proxyWithComputed, subscribe, ref } from '@zag-js/store';\nexport { proxy, ref, snapshot, subscribe } from '@zag-js/store';\nimport { compact, isPlainObject, uuid, cast, callAll, isString, isFunction, noop, isObject, runIfFn, invariant, clear, isArray, hasProp, warn, isDev, isNumber } from '@zag-js/utils';\nimport { klona } from 'klona/full';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nfunction deepMerge(source, ...objects) {\n  for (const obj of objects) {\n    const target = compact(obj);\n    for (const key in target) {\n      if (isPlainObject(obj[key])) {\n        if (!source[key]) {\n          source[key] = {};\n        }\n        deepMerge(source[key], obj[key]);\n      } else {\n        source[key] = obj[key];\n      }\n    }\n  }\n  return source;\n}\nfunction structuredClone(v) {\n  return klona(v);\n}\nfunction toEvent(event) {\n  const obj = isString(event) ? { type: event } : event;\n  return obj;\n}\nfunction toArray(value) {\n  if (!value) return [];\n  return isArray(value) ? value.slice() : [value];\n}\nfunction isGuardHelper(value) {\n  return isObject(value) && value.predicate != null;\n}\n\n// src/guard-utils.ts\nvar Truthy = () => true;\nfunction exec(guardMap, ctx, event, meta) {\n  return (guard) => {\n    if (isString(guard)) {\n      return !!guardMap[guard]?.(ctx, event, meta);\n    }\n    if (isFunction(guard)) {\n      return guard(ctx, event, meta);\n    }\n    return guard.predicate(guardMap)(ctx, event, meta);\n  };\n}\nfunction or(...conditions) {\n  return {\n    predicate: (guardMap) => (ctx, event, meta) => conditions.map(exec(guardMap, ctx, event, meta)).some(Boolean)\n  };\n}\nfunction and(...conditions) {\n  return {\n    predicate: (guardMap) => (ctx, event, meta) => conditions.map(exec(guardMap, ctx, event, meta)).every(Boolean)\n  };\n}\nfunction not(condition) {\n  return {\n    predicate: (guardMap) => (ctx, event, meta) => {\n      return !exec(guardMap, ctx, event, meta)(condition);\n    }\n  };\n}\nfunction stateIn(...values) {\n  return (_ctx, _evt, meta) => meta.state.matches(...values);\n}\nvar guards = { or, and, not, stateIn };\nfunction choose(actions) {\n  return {\n    predicate: (guardMap) => (ctx, event, meta) => actions.find((def) => {\n      const guard = def.guard ?? Truthy;\n      return exec(guardMap, ctx, event, meta)(guard);\n    })?.actions\n  };\n}\nfunction determineGuardFn(guard, guardMap) {\n  guard = guard ?? Truthy;\n  return (context, event, meta) => {\n    if (isString(guard)) {\n      const value = guardMap[guard];\n      return isFunction(value) ? value(context, event, meta) : value;\n    }\n    if (isGuardHelper(guard)) {\n      return guard.predicate(guardMap)(context, event, meta);\n    }\n    return guard?.(context, event, meta);\n  };\n}\nfunction determineActionsFn(values, guardMap) {\n  return (context, event, meta) => {\n    if (isGuardHelper(values)) {\n      return values.predicate(guardMap)(context, event, meta);\n    }\n    return values;\n  };\n}\nfunction createProxy(config) {\n  const computedContext = config.computed ?? cast({});\n  const initialContext = config.context ?? cast({});\n  const initialTags = config.initial ? config.states?.[config.initial]?.tags : [];\n  const state = proxy({\n    value: config.initial ?? \"\",\n    previousValue: \"\",\n    event: cast({}),\n    previousEvent: cast({}),\n    context: proxyWithComputed(initialContext, computedContext),\n    done: false,\n    tags: initialTags ?? [],\n    hasTag(tag) {\n      return this.tags.includes(tag);\n    },\n    matches(...value) {\n      return value.includes(this.value);\n    },\n    can(event) {\n      return cast(this).nextEvents.includes(event);\n    },\n    get nextEvents() {\n      const stateEvents = config.states?.[this.value]?.[\"on\"] ?? {};\n      const globalEvents = config?.on ?? {};\n      return Object.keys({ ...stateEvents, ...globalEvents });\n    },\n    get changed() {\n      if (this.event.value === \"machine.init\" /* Init */ || !this.previousValue) return false;\n      return this.value !== this.previousValue;\n    }\n  });\n  return cast(state);\n}\nfunction determineDelayFn(delay, delaysMap) {\n  return (context, event) => {\n    if (isNumber(delay)) return delay;\n    if (isFunction(delay)) {\n      return delay(context, event);\n    }\n    if (isString(delay)) {\n      const value = Number.parseFloat(delay);\n      if (!Number.isNaN(value)) {\n        return value;\n      }\n      if (delaysMap) {\n        const valueOrFn = delaysMap?.[delay];\n        invariant(\n          valueOrFn == null,\n          `[@zag-js/core > determine-delay] Cannot determine delay for \\`${delay}\\`. It doesn't exist in \\`options.delays\\``\n        );\n        return isFunction(valueOrFn) ? valueOrFn(context, event) : valueOrFn;\n      }\n    }\n  };\n}\nfunction toTarget(target) {\n  return isString(target) ? { target } : target;\n}\nfunction determineTransitionFn(transitions, guardMap) {\n  return (context, event, meta) => {\n    return toArray(transitions).map(toTarget).find((transition) => {\n      const determineGuard = determineGuardFn(transition.guard, guardMap);\n      const guard = determineGuard(context, event, meta);\n      return guard ?? transition.target ?? transition.actions;\n    });\n  };\n}\n\n// src/machine.ts\nvar Machine = class {\n  // Let's get started!\n  constructor(config, options) {\n    __publicField(this, \"status\", \"Not Started\" /* NotStarted */);\n    __publicField(this, \"state\");\n    __publicField(this, \"initialState\");\n    __publicField(this, \"initialContext\");\n    __publicField(this, \"id\");\n    __publicField(this, \"type\", \"machine\" /* Machine */);\n    // Cleanup function map (per state)\n    __publicField(this, \"activityEvents\", /* @__PURE__ */ new Map());\n    __publicField(this, \"delayedEvents\", /* @__PURE__ */ new Map());\n    // state update listeners the user can opt-in for\n    __publicField(this, \"stateListeners\", /* @__PURE__ */ new Set());\n    __publicField(this, \"doneListeners\", /* @__PURE__ */ new Set());\n    __publicField(this, \"contextWatchers\", /* @__PURE__ */ new Set());\n    // Cleanup functions (for `subscribe`)\n    __publicField(this, \"removeStateListener\", noop);\n    // For Parent <==> Spawned Actor relationship\n    __publicField(this, \"parent\");\n    __publicField(this, \"children\", /* @__PURE__ */ new Map());\n    // A map of guard, action, delay implementations\n    __publicField(this, \"guardMap\");\n    __publicField(this, \"actionMap\");\n    __publicField(this, \"delayMap\");\n    __publicField(this, \"activityMap\");\n    __publicField(this, \"sync\");\n    __publicField(this, \"options\");\n    __publicField(this, \"config\");\n    __publicField(this, \"_created\", () => {\n      const event = toEvent(\"machine.created\" /* Created */);\n      this.executeActions(this.config?.created, event);\n    });\n    // Starts the interpreted machine.\n    __publicField(this, \"start\", (init) => {\n      this.state.value = \"\";\n      this.state.tags = [];\n      if (this.status === \"Running\" /* Running */) {\n        return this;\n      }\n      this.status = \"Running\" /* Running */;\n      this.removeStateListener = subscribe(\n        this.state,\n        () => {\n          this.stateListeners.forEach((listener) => {\n            listener(this.stateSnapshot);\n          });\n        },\n        this.sync\n      );\n      this.setupContextWatchers();\n      this.executeActivities(toEvent(\"machine.start\" /* Start */), toArray(this.config.activities), \"machine.start\" /* Start */);\n      this.executeActions(this.config.entry, toEvent(\"machine.start\" /* Start */));\n      const event = toEvent(\"machine.init\" /* Init */);\n      const target = isObject(init) ? init.value : init;\n      const context = isObject(init) ? init.context : void 0;\n      if (context) {\n        this.setContext(context);\n      }\n      const transition = {\n        target: target ?? this.config.initial\n      };\n      const next = this.getNextStateInfo(transition, event);\n      this.initialState = next;\n      this.performStateChangeEffects(this.state.value, next, event);\n      return this;\n    });\n    __publicField(this, \"setupContextWatchers\", () => {\n      const { watch } = this.config;\n      if (!watch) return;\n      let prev = snapshot(this.state.context);\n      const cleanup = subscribe(this.state.context, () => {\n        const next = snapshot(this.state.context);\n        for (const [key, fn] of Object.entries(watch)) {\n          const isEqual = this.options.compareFns?.[key] ?? Object.is;\n          if (isEqual(prev[key], next[key])) continue;\n          this.executeActions(fn, this.state.event);\n        }\n        prev = next;\n      });\n      this.contextWatchers.add(cleanup);\n    });\n    // Stops the interpreted machine\n    __publicField(this, \"stop\", () => {\n      if (this.status === \"Stopped\" /* Stopped */) return;\n      this.performExitEffects(this.state.value, toEvent(\"machine.stop\" /* Stop */));\n      this.executeActions(this.config.exit, toEvent(\"machine.stop\" /* Stop */));\n      this.setState(\"\");\n      this.setEvent(\"machine.stop\" /* Stop */);\n      this.stopStateListeners();\n      this.stopChildren();\n      this.stopActivities();\n      this.stopDelayedEvents();\n      this.stopContextWatchers();\n      this.status = \"Stopped\" /* Stopped */;\n      return this;\n    });\n    __publicField(this, \"stopStateListeners\", () => {\n      this.removeStateListener();\n      this.stateListeners.clear();\n    });\n    __publicField(this, \"stopContextWatchers\", () => {\n      this.contextWatchers.forEach((fn) => fn());\n      this.contextWatchers.clear();\n    });\n    __publicField(this, \"stopDelayedEvents\", () => {\n      this.delayedEvents.forEach((state) => {\n        state.forEach((stop) => stop());\n      });\n      this.delayedEvents.clear();\n    });\n    // Cleanup running activities (e.g `setInterval`, invoked callbacks, promises)\n    __publicField(this, \"stopActivities\", (state) => {\n      if (state) {\n        this.activityEvents.get(state)?.forEach((stop) => stop());\n        this.activityEvents.get(state)?.clear();\n        this.activityEvents.delete(state);\n      } else {\n        this.activityEvents.forEach((state2) => {\n          state2.forEach((stop) => stop());\n          state2.clear();\n        });\n        this.activityEvents.clear();\n      }\n    });\n    /**\n     * Function to send event to spawned child machine or actor\n     */\n    __publicField(this, \"sendChild\", (evt, to) => {\n      const event = toEvent(evt);\n      const id = runIfFn(to, this.contextSnapshot);\n      const child = this.children.get(id);\n      if (!child) {\n        invariant(`[@zag-js/core] Cannot send '${event.type}' event to unknown child`);\n      }\n      child.send(event);\n    });\n    /**\n     * Function to stop a running child machine or actor\n     */\n    __publicField(this, \"stopChild\", (id) => {\n      if (!this.children.has(id)) {\n        invariant(`[@zag-js/core > stop-child] Cannot stop unknown child ${id}`);\n      }\n      this.children.get(id).stop();\n      this.children.delete(id);\n    });\n    __publicField(this, \"removeChild\", (id) => {\n      this.children.delete(id);\n    });\n    // Stop and delete spawned actors\n    __publicField(this, \"stopChildren\", () => {\n      this.children.forEach((child) => child.stop());\n      this.children.clear();\n    });\n    __publicField(this, \"setParent\", (parent) => {\n      this.parent = parent;\n    });\n    __publicField(this, \"spawn\", (src, id) => {\n      const actor = runIfFn(src);\n      if (id) actor.id = id;\n      actor.type = \"machine.actor\" /* Actor */;\n      actor.setParent(this);\n      this.children.set(actor.id, cast(actor));\n      actor.onDone(() => {\n        this.removeChild(actor.id);\n      }).start();\n      return cast(ref(actor));\n    });\n    __publicField(this, \"stopActivity\", (key) => {\n      if (!this.state.value) return;\n      const cleanups = this.activityEvents.get(this.state.value);\n      cleanups?.get(key)?.();\n      cleanups?.delete(key);\n    });\n    __publicField(this, \"addActivityCleanup\", (state, key, cleanup) => {\n      if (!state) return;\n      if (!this.activityEvents.has(state)) {\n        this.activityEvents.set(state, /* @__PURE__ */ new Map([[key, cleanup]]));\n      } else {\n        this.activityEvents.get(state)?.set(key, cleanup);\n      }\n    });\n    __publicField(this, \"setState\", (target) => {\n      this.state.previousValue = this.state.value;\n      this.state.value = target;\n      const stateNode = this.getStateNode(target);\n      if (target == null) {\n        clear(this.state.tags);\n      } else {\n        this.state.tags = toArray(stateNode?.tags);\n      }\n    });\n    /**\n     * To used within side effects for React or Vue to update context\n     */\n    __publicField(this, \"setContext\", (context) => {\n      if (!context) return;\n      deepMerge(this.state.context, compact(context));\n    });\n    __publicField(this, \"setOptions\", (options) => {\n      const opts = compact(options);\n      this.actionMap = { ...this.actionMap, ...opts.actions };\n      this.delayMap = { ...this.delayMap, ...opts.delays };\n      this.activityMap = { ...this.activityMap, ...opts.activities };\n      this.guardMap = { ...this.guardMap, ...opts.guards };\n    });\n    __publicField(this, \"getStateNode\", (state) => {\n      if (!state) return;\n      return this.config.states?.[state];\n    });\n    __publicField(this, \"getNextStateInfo\", (transitions, event) => {\n      const transition = this.determineTransition(transitions, event);\n      const isTargetless = !transition?.target;\n      const target = transition?.target ?? this.state.value;\n      const changed = this.state.value !== target;\n      const stateNode = this.getStateNode(target);\n      const reenter = !isTargetless && !changed && !transition?.internal;\n      const info = {\n        reenter,\n        transition,\n        stateNode,\n        target,\n        changed\n      };\n      this.log(\"NextState:\", `[${event.type}]`, this.state.value, \"---->\", info.target);\n      return info;\n    });\n    __publicField(this, \"getAfterActions\", (transition, delay) => {\n      let id;\n      const current = this.state.value;\n      return {\n        entry: () => {\n          id = globalThis.setTimeout(() => {\n            const next = this.getNextStateInfo(transition, this.state.event);\n            this.performStateChangeEffects(current, next, this.state.event);\n          }, delay);\n        },\n        exit: () => {\n          globalThis.clearTimeout(id);\n        }\n      };\n    });\n    /**\n     * All `after` events leverage `setTimeout` and `clearTimeout`,\n     * we invoke the `clearTimeout` on exit and `setTimeout` on entry.\n     *\n     * To achieve this, we split the `after` defintion into `entry` and `exit`\n     *  functions and append them to the state's `entry` and `exit` actions\n     */\n    __publicField(this, \"getDelayedEventActions\", (state) => {\n      const stateNode = this.getStateNode(state);\n      const event = this.state.event;\n      if (!stateNode || !stateNode.after) return;\n      const entries = [];\n      const exits = [];\n      if (isArray(stateNode.after)) {\n        const transition = this.determineTransition(stateNode.after, event);\n        if (!transition) return;\n        if (!hasProp(transition, \"delay\")) {\n          throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(transition)}`);\n        }\n        const determineDelay = determineDelayFn(transition.delay, this.delayMap);\n        const __delay = determineDelay(this.contextSnapshot, event);\n        const actions = this.getAfterActions(transition, __delay);\n        entries.push(actions.entry);\n        exits.push(actions.exit);\n        return { entries, exits };\n      }\n      if (isObject(stateNode.after)) {\n        for (const delay in stateNode.after) {\n          const transition = stateNode.after[delay];\n          const determineDelay = determineDelayFn(delay, this.delayMap);\n          const __delay = determineDelay(this.contextSnapshot, event);\n          const actions = this.getAfterActions(transition, __delay);\n          entries.push(actions.entry);\n          exits.push(actions.exit);\n        }\n      }\n      return { entries, exits };\n    });\n    /**\n     * Function to executes defined actions. It can accept actions as string\n     * (referencing `options.actions`) or actual functions.\n     */\n    __publicField(this, \"executeActions\", (actions, event) => {\n      const pickedActions = determineActionsFn(actions, this.guardMap)(this.contextSnapshot, event, this.guardMeta);\n      for (const action of toArray(pickedActions)) {\n        const fn = isString(action) ? this.actionMap?.[action] : action;\n        warn(\n          isString(action) && !fn,\n          `[@zag-js/core > execute-actions] No implementation found for action: \\`${action}\\``\n        );\n        fn?.(this.state.context, event, this.meta);\n      }\n    });\n    /**\n     * Function to execute running activities and registers\n     * their cleanup function internally (to be called later on when we exit the state)\n     */\n    __publicField(this, \"executeActivities\", (event, activities, state) => {\n      for (const activity of activities) {\n        const fn = isString(activity) ? this.activityMap?.[activity] : activity;\n        if (!fn) {\n          warn(`[@zag-js/core > execute-activity] No implementation found for activity: \\`${activity}\\``);\n          continue;\n        }\n        const cleanup = fn(this.state.context, event, this.meta);\n        if (cleanup) {\n          const key = isString(activity) ? activity : activity.name || uuid();\n          this.addActivityCleanup(state ?? this.state.value, key, cleanup);\n        }\n      }\n    });\n    /**\n     * Normalizes the `every` definition to transition. `every` can be:\n     * - An array of possible actions to run (we need to pick the first match based on guard)\n     * - An object of intervals and actions\n     */\n    __publicField(this, \"createEveryActivities\", (every, callbackfn) => {\n      if (!every) return;\n      if (isArray(every)) {\n        const picked = toArray(every).find((transition) => {\n          const delayOrFn = transition.delay;\n          const determineDelay2 = determineDelayFn(delayOrFn, this.delayMap);\n          const delay2 = determineDelay2(this.contextSnapshot, this.state.event);\n          const determineGuard = determineGuardFn(transition.guard, this.guardMap);\n          const guard = determineGuard(this.contextSnapshot, this.state.event, this.guardMeta);\n          return guard ?? delay2 != null;\n        });\n        if (!picked) return;\n        const determineDelay = determineDelayFn(picked.delay, this.delayMap);\n        const delay = determineDelay(this.contextSnapshot, this.state.event);\n        const activity = () => {\n          const id = globalThis.setInterval(() => {\n            this.executeActions(picked.actions, this.state.event);\n          }, delay);\n          return () => {\n            globalThis.clearInterval(id);\n          };\n        };\n        callbackfn(activity);\n      } else {\n        for (const interval in every) {\n          const actions = every?.[interval];\n          const determineDelay = determineDelayFn(interval, this.delayMap);\n          const delay = determineDelay(this.contextSnapshot, this.state.event);\n          const activity = () => {\n            const id = globalThis.setInterval(() => {\n              this.executeActions(actions, this.state.event);\n            }, delay);\n            return () => {\n              globalThis.clearInterval(id);\n            };\n          };\n          callbackfn(activity);\n        }\n      }\n    });\n    __publicField(this, \"setEvent\", (event) => {\n      this.state.previousEvent = this.state.event;\n      this.state.event = ref(toEvent(event));\n    });\n    __publicField(this, \"performExitEffects\", (current, event) => {\n      const currentState = this.state.value;\n      if (currentState === \"\") return;\n      const stateNode = current ? this.getStateNode(current) : void 0;\n      this.stopActivities(currentState);\n      const _exit = determineActionsFn(stateNode?.exit, this.guardMap)(this.contextSnapshot, event, this.guardMeta);\n      const exitActions = toArray(_exit);\n      const afterExitActions = this.delayedEvents.get(currentState);\n      if (afterExitActions) {\n        exitActions.push(...afterExitActions);\n      }\n      this.executeActions(exitActions, event);\n      this.delayedEvents.delete(currentState);\n    });\n    __publicField(this, \"performEntryEffects\", (next, event) => {\n      const stateNode = this.getStateNode(next);\n      const activities = toArray(stateNode?.activities);\n      this.createEveryActivities(stateNode?.every, (activity) => {\n        activities.unshift(activity);\n      });\n      if (activities.length > 0) {\n        this.executeActivities(event, activities);\n      }\n      const pickedActions = determineActionsFn(stateNode?.entry, this.guardMap)(\n        this.contextSnapshot,\n        event,\n        this.guardMeta\n      );\n      const entryActions = toArray(pickedActions);\n      const afterActions = this.getDelayedEventActions(next);\n      if (stateNode?.after && afterActions) {\n        this.delayedEvents.set(next, afterActions?.exits);\n        entryActions.push(...afterActions.entries);\n      }\n      this.executeActions(entryActions, event);\n      if (stateNode?.type === \"final\") {\n        this.state.done = true;\n        this.doneListeners.forEach((listener) => {\n          listener(this.stateSnapshot);\n        });\n        this.stop();\n      }\n    });\n    __publicField(this, \"performTransitionEffects\", (transitions, event) => {\n      const transition = this.determineTransition(transitions, event);\n      this.executeActions(transition?.actions, event);\n    });\n    /**\n     * Performs all the requires side-effects or reactions when\n     * we move from state A => state B.\n     *\n     * The Effect order:\n     * Exit actions (current state) => Transition actions  => Go to state => Entry actions (next state)\n     */\n    __publicField(this, \"performStateChangeEffects\", (current, next, event) => {\n      this.setEvent(event);\n      const changed = next.changed || next.reenter;\n      if (changed) {\n        this.performExitEffects(current, event);\n      }\n      this.performTransitionEffects(next.transition, event);\n      this.setState(next.target);\n      if (changed) {\n        this.performEntryEffects(next.target, event);\n      }\n    });\n    __publicField(this, \"determineTransition\", (transition, event) => {\n      const fn = determineTransitionFn(transition, this.guardMap);\n      return fn?.(this.contextSnapshot, event, this.guardMeta);\n    });\n    /**\n     * Function to send event to parent machine from spawned child\n     */\n    __publicField(this, \"sendParent\", (evt) => {\n      if (!this.parent) {\n        invariant(\"[@zag-js/core > send-parent] Cannot send event to an unknown parent\");\n      }\n      const event = toEvent(evt);\n      this.parent?.send(event);\n    });\n    __publicField(this, \"log\", (...args) => {\n      if (isDev() && this.options.debug) {\n        console.log(...args);\n      }\n    });\n    /**\n     * Function to send an event to current machine\n     */\n    __publicField(this, \"send\", (evt) => {\n      const event = toEvent(evt);\n      this.transition(this.state.value, event);\n    });\n    __publicField(this, \"transition\", (state, evt) => {\n      const stateNode = isString(state) ? this.getStateNode(state) : state?.stateNode;\n      const event = toEvent(evt);\n      if (!stateNode && !this.config.on) {\n        const msg = this.status === \"Stopped\" /* Stopped */ ? \"[@zag-js/core > transition] Cannot transition a stopped machine\" : `[@zag-js/core > transition] State does not have a definition for \\`state\\`: ${state}, \\`event\\`: ${event.type}`;\n        warn(msg);\n        return;\n      }\n      const transitions = (\n        // @ts-expect-error - Fix this\n        stateNode?.on?.[event.type] ?? this.config.on?.[event.type]\n      );\n      const next = this.getNextStateInfo(transitions, event);\n      this.performStateChangeEffects(this.state.value, next, event);\n      return next.stateNode;\n    });\n    __publicField(this, \"subscribe\", (listener) => {\n      this.stateListeners.add(listener);\n      if (this.status === \"Running\" /* Running */) {\n        listener(this.stateSnapshot);\n      }\n      return () => {\n        this.stateListeners.delete(listener);\n      };\n    });\n    __publicField(this, \"onDone\", (listener) => {\n      this.doneListeners.add(listener);\n      return this;\n    });\n    __publicField(this, \"onTransition\", (listener) => {\n      this.stateListeners.add(listener);\n      if (this.status === \"Running\" /* Running */) {\n        listener(this.stateSnapshot);\n      }\n      return this;\n    });\n    this.config = structuredClone(config);\n    this.options = structuredClone(options ?? {});\n    this.id = this.config.id ?? `machine-${uuid()}`;\n    this.guardMap = this.options?.guards ?? {};\n    this.actionMap = this.options?.actions ?? {};\n    this.delayMap = this.options?.delays ?? {};\n    this.activityMap = this.options?.activities ?? {};\n    this.sync = this.options?.sync ?? false;\n    this.state = createProxy(this.config);\n    this.initialContext = snapshot(this.state.context);\n  }\n  // immutable state value\n  get stateSnapshot() {\n    return cast(snapshot(this.state));\n  }\n  getState() {\n    return this.stateSnapshot;\n  }\n  // immutable context value\n  get contextSnapshot() {\n    return this.stateSnapshot.context;\n  }\n  /**\n   * A reference to the instance methods of the machine.\n   * Useful when spawning child machines and managing the communication between them.\n   */\n  get self() {\n    const self = this;\n    return {\n      id: this.id,\n      send: this.send.bind(this),\n      sendParent: this.sendParent.bind(this),\n      sendChild: this.sendChild.bind(this),\n      stop: this.stop.bind(this),\n      stopChild: this.stopChild.bind(this),\n      spawn: this.spawn.bind(this),\n      stopActivity: this.stopActivity.bind(this),\n      get state() {\n        return self.stateSnapshot;\n      },\n      get initialContext() {\n        return self.initialContext;\n      },\n      get initialState() {\n        return self.initialState?.target ?? \"\";\n      }\n    };\n  }\n  get meta() {\n    return {\n      state: this.stateSnapshot,\n      guards: this.guardMap,\n      send: this.send.bind(this),\n      self: this.self,\n      initialContext: this.initialContext,\n      initialState: this.initialState?.target ?? \"\",\n      getState: () => this.stateSnapshot,\n      getAction: (key) => this.actionMap[key],\n      getGuard: (key) => this.guardMap[key]\n    };\n  }\n  get guardMeta() {\n    return {\n      state: this.stateSnapshot\n    };\n  }\n  get [Symbol.toStringTag]() {\n    return \"Machine\";\n  }\n  getHydrationState() {\n    const state = this.getState();\n    return {\n      value: state.value,\n      tags: state.tags\n    };\n  }\n};\nvar createMachine = (config, options) => new Machine(config, options);\nvar isMachine = (value) => {\n  return value instanceof Machine || value?.type === \"machine\" /* Machine */;\n};\nvar clsx = (...args) => args.map((str) => str?.trim?.()).filter(Boolean).join(\" \");\nvar CSS_REGEX = /((?:--)?(?:\\w+-?)+)\\s*:\\s*([^;]*)/g;\nvar serialize = (style) => {\n  const res = {};\n  let match;\n  while (match = CSS_REGEX.exec(style)) {\n    res[match[1]] = match[2];\n  }\n  return res;\n};\nvar css = (a, b) => {\n  if (isString(a)) {\n    if (isString(b)) return `${a};${b}`;\n    a = serialize(a);\n  } else if (isString(b)) {\n    b = serialize(b);\n  }\n  return Object.assign({}, a ?? {}, b ?? {});\n};\nfunction mergeProps(...args) {\n  let result = {};\n  for (let props of args) {\n    for (let key in result) {\n      if (key.startsWith(\"on\") && typeof result[key] === \"function\" && typeof props[key] === \"function\") {\n        result[key] = callAll(props[key], result[key]);\n        continue;\n      }\n      if (key === \"className\" || key === \"class\") {\n        result[key] = clsx(result[key], props[key]);\n        continue;\n      }\n      if (key === \"style\") {\n        result[key] = css(result[key], props[key]);\n        continue;\n      }\n      result[key] = props[key] !== void 0 ? props[key] : result[key];\n    }\n    for (let key in props) {\n      if (result[key] === void 0) {\n        result[key] = props[key];\n      }\n    }\n  }\n  return result;\n}\n\nexport { Machine, choose, createMachine, deepMerge, guards, isMachine, mergeProps };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}